<!DOCTYPE html>
<html>
<head>
    <script src='lib/phaser-2.js'></script>
    <script src='assets/slick-ui-master/dist/slick-ui.min.js'></script>
    <style>
        body {
            padding: 0;
            margin: 0;
       
        }
        #canvas {
            margin-left: auto;
            margin-right: auto;
            width: 1366px;
            height: 768px;
        }
    </style>
</head>
<body>
<div id="canvas">

</div>
    <script>
        var game = new Phaser.Game(1366, 768, Phaser.AUTO, 'canvas', { preload: preload, create: create });

        function preload () {
            game.load.image('homeBtn', 'icons/home.png');
            game.load.image('freeplayBtn', 'icons/freeplay.png');
            game.load.image('playlistBtn', 'icons/playlist.png');
            game.load.image('musicOn', 'icons/toggle-on.png');
            game.load.image('musicOff', 'icons/toggle-off.png');
            game.load.image('continueBtn', 'icons/continue.png');
            game.load.image('freeplayBG', 'images/freeplay-BG.png');
            game.load.image('slider', 'images/slider-base.png');
            game.load.image('wholeNote', 'images/drag-wholenote.png');
            game.load.image('halfNote', 'images/drag-halfnote.png');
            game.load.image('quarterNote', 'images/drag-quarternote.png');

            slickUI = game.plugins.add(Phaser.Plugin.SlickUI);
            slickUI.load('assets/slick-ui-master/themes/custom-theme/custom.json');
        }
        var homeBtn, freeplayBtn, playlistBtn, musicOn, musicOff, continueBtn, wholeNote, panel, slider, test;

        function create() {
            //Set background
            game.add.image(0, -1, 'freeplayBG');
            game.add.image(370, 646, 'slider');

            //Instantiate buttons
            homeBtn = game.add.button(48, 30, 'homeBtn', actionOnClick, this);
            homeBtn.alpha = 0.85;
            homeBtn.onInputOver.add(over, this);
            homeBtn.onInputOut.add(out, this);

            freeplayBtn = game.add.button(123, 30, 'freeplayBtn', actionOnClick, this);
            freeplayBtn.alpha = 0.85;
            freeplayBtn.onInputOver.add(over, this);
            freeplayBtn.onInputOut.add(out, this);

            playlistBtn = game.add.button(198, 30, 'playlistBtn', actionOnClick, this);
            playlistBtn.alpha = 0.85;
            playlistBtn.onInputOver.add(over, this);
            playlistBtn.onInputOut.add(out, this);

            musicOn = game.add.button(1250, 40, 'musicOn', actionOnClick, this);
            musicOn.alpha = 0.85;
            musicOn.onInputOver.add(over, this);
            musicOn.onInputOut.add(out, this);

            continueBtn = game.add.button(1179, 587, 'continueBtn', actionOnClick, this);
            continueBtn.alpha = 0.85;
            continueBtn.onInputOver.add(over, this);
            continueBtn.onInputOut.add(out, this);

            //Set button hover and click actions
            function over(event) {
                window[event.key].alpha = 1;
                document.body.style.cursor = "pointer";
            }
            function out(event) {
                window[event.key].alpha = 0.85;
                document.body.style.cursor = "default";
            }
            function actionOnClick(event) {
                console.log(event.key, "clicked!");
            }

            // Set notes as draggable
            wholeNote = game.add.sprite(60, 160, 'wholeNote');
            wholeNote.inputEnabled = 'true';
            wholeNote.input.enableDrag(true);
            wholeNote.events.onDragStart.add(dragStart);
            wholeNote.events.onDragStop.add(dragStop);
            wholeNote.events.onInputDown.add(inputDown);

            halfNote = game.add.sprite(64, 263, 'halfNote');
            halfNote.inputEnabled = 'true';
            halfNote.input.enableDrag(true);
            halfNote.events.onDragStart.add(dragStart);
            halfNote.events.onDragStop.add(dragStop);
            halfNote.events.onInputDown.add(inputDown);

            quarterNote = game.add.sprite(60, 425, 'quarterNote');
            quarterNote.inputEnabled = 'true';
            quarterNote.input.enableDrag(true);
            quarterNote.events.onDragStart.add(dragStart);
            quarterNote.events.onDragStop.add(dragStop);
            quarterNote.events.onInputDown.add(inputDown);

            //Change note opacity on drag
            function dragStart(event) {
                console.log(event.key);
                window[event.key].alpha = 0.7;
            }
            function dragStop(event) {
                window[event.key].alpha = 1;
            }

            //Populate new note on click
            var count = 0;
            function inputDown(event) {
                if (event.key == 'wholeNote') {
                    eval('var ' + (event.key + count) + '=' + 'game.add.sprite(60, 160, "wholeNote");');
                } else if (event.key == 'halfNote') {
                    eval('var ' + (event.key + count) + '=' + 'game.add.sprite(64, 263, "halfNote");');
                } else {
                    eval('var ' + (event.key + count) + '=' + 'game.add.sprite(60, 425, "quarterNote");');
                }
                eval(event.key + count).inputEnabled = 'true';
                eval(event.key + count).input.enableDrag(true);
                eval(event.key + count).events.onDragStart.add(dragStart);
                eval(event.key + count).events.onDragStop.add(dragStop);
                eval(event.key + count).events.onInputDown.add(inputDown);
            }

            //Instantiate slider
            slickUI.add(panel = new SlickUI.Element.Panel(370, 570, 722, 70));
            panel.add(slider = new SlickUI.Element.Slider(33, 90, panel.width - 68));
            
            //Set slider actions
            slider.onDragStop.add(function (value) {
                console.log('Stop dragging at ' + Math.round(value * 100) + '%');
            });
        }
    </script>
</body>
</html>